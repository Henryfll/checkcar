<div class="min-h-screen" style="padding: 0 !important;">
  <mat-card class="cardWithShadow theme-card p-4 full-width-card">
    <mat-card-header>
      <mat-card-title class="m-b-0">Delegados</mat-card-title>
    </mat-card-header>
    <mat-card-content class="b-t-1">
      <div class="row justify-content-end">
        <button class="btn btn-info" mat-raised-button color="primary"
          (click)="nuevaBusqueda()"> <mat-icon>refresh</mat-icon> Refrescar</button>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="table-scroll-container">
            <table
              mat-table
              *ngIf="listaJuntas"
              [dataSource]="dataSource"
              style="height: 500px"
              class="table table-hover table-center mb-0 datatable"
              matSort
            >
              <!-- Nro -->
              <ng-container matColumnDef="numero">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter"> <span>Nro</span></div>
                </th>
                <td mat-cell *matCellDef="let element; let i = index">
                  {{ i + 1 }}
                </td>
              </ng-container>

              <!-- Provincia -->
              <ng-container matColumnDef="provincia">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Provincia</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <input
                        matInput
                        (keyup)="applyFilter('provincia', $event)"
                        placeholder="Filtrar"
                      />
                    </mat-form-field>
                  </div>
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.provincia }}
                </td>
              </ng-container>

              <!-- Canton -->
              <ng-container matColumnDef="canton">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Canton</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <input
                        matInput
                        placeholder="Filtrar"
                        (keyup)="applyFilter('canton', $event)"
                      />
                    </mat-form-field>
                  </div>
                </th>
                <td mat-cell *matCellDef="let element">{{ element.canton }}</td>
              </ng-container>

              <!-- Parroquia -->
              <ng-container matColumnDef="parroquia">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Parroquia</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <input
                        matInput
                        placeholder="Filtrar"
                        (keyup)="applyFilter('parroquia', $event)"
                      />
                    </mat-form-field>
                  </div>
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.parroquia }}
                </td>
              </ng-container>

              <!-- Recinto -->
              <ng-container matColumnDef="recinto">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Recinto</span>
                    <mat-form-field
                      appearance="outline"
                      class="filter-field"
                      style="width: 100%"
                    >
                      <input
                        matInput
                        placeholder="Filtrar"
                        (keyup)="applyFilter('recinto', $event)"
                      />
                    </mat-form-field>
                  </div>
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.recinto }}
                </td>
              </ng-container>

              <!-- Junta -->
              <ng-container matColumnDef="junta">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Junta</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <input
                        matInput
                        placeholder="Filtrar"
                        (keyup)="applyFilter('junta', $event)"
                      />
                    </mat-form-field>
                  </div>
                </th>
                <td mat-cell *matCellDef="let element">{{ element.junta }}</td>
              </ng-container>

              <!-- Estado Delegado -->
              <ng-container matColumnDef="estDelegado">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Estado Delegado</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <mat-select
                        placeholder="Filtrar"
                        (selectionChange)="
                          applySelectFilter('estDelegado', $event.value)
                        "
                      >
                        <mat-option value="">Todos</mat-option>
                        <mat-option value="CONFIRMADO">CONFIRMADO</mat-option>
                        <mat-option value="PENDIENTE">PENDIENTE</mat-option>
                        <mat-option value="VOLVER A LLAMAR">VOLVER A LLAMAR</mat-option>
                        <mat-option value="NO CONTESTA">NO CONTESTA</mat-option>
                        <mat-option value="NUMERO EQUIVOCADO">NUMERO EQUIVOCADO</mat-option>
                        <mat-option value="CAP JUEVES">CAP JUEVES</mat-option>
                        <mat-option value="CAP VIERNES">CAP VIERNES</mat-option>
                        <mat-option value="CAP SABADO 1">CAP SABADO 1</mat-option>
                        <mat-option value="CAP SABADO 2">CAP SABADO 2</mat-option>
                        <mat-option value="DOM MAÑANA">DOM MAÑANA</mat-option>
                        <mat-option value="DOM TARDE">DOM TARDE</mat-option>
                        <mat-option value="DOM TARDE">SIMULACRO</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </th>

                <td mat-cell *matCellDef="let element">
                  <mat-select
                    [(ngModel)]="element.estDelegado"
                    style="width: 160px"
                  >
                    <mat-option value="CONFIRMADO">CONFIRMADO</mat-option>
                    <mat-option value="PENDIENTE">PENDIENTE</mat-option>
                    <mat-option value="VOLVER A LLAMAR">VOLVER A LLAMAR</mat-option>
                    <mat-option value="NO CONTESTA">NO CONTESTA</mat-option>
                    <mat-option value="NUMERO EQUIVOCADO">NUMERO EQUIVOCADO</mat-option>
                    <mat-option value="CAP JUEVES">CAP JUEVES</mat-option>
                    <mat-option value="CAP VIERNES">CAP VIERNES</mat-option>
                    <mat-option value="CAP SABADO 1">CAP SABADO 1</mat-option>
                    <mat-option value="CAP SABADO 2">CAP SABADO 2</mat-option>
                    <mat-option value="DOM MAÑANA">DOM MAÑANA</mat-option>
                    <mat-option value="DOM TARDE">DOM TARDE</mat-option>
                    <mat-option value="DOM TARDE">SIMULACRO</mat-option>
                  </mat-select>
                </td>
              </ng-container>

              <!-- Voluntario -->
              <ng-container matColumnDef="voluntario">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Voluntario</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <mat-select
                        placeholder="Filtrar por"
                        (selectionChange)="
                          applySelectFilter('voluntario', $event.value)
                        "
                      >
                        <mat-option value="">Todos</mat-option>
                        <mat-option value="SI">SI</mat-option>
                        <mat-option value="NO">NO</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </th>

                <td mat-cell *matCellDef="let element">
                  <mat-select
                    [(ngModel)]="element.voluntario"
                    style="width: 160px"
                  >
                    <mat-option value="SI">SI</mat-option>
                    <mat-option value="NO">NO</mat-option>
                  </mat-select>
                </td>
              </ng-container>

              <!-- Observación Delegado -->
              <ng-container matColumnDef="obsDelegado">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter"> <span>Observación Delegado</span></div>

                </th>
                <td mat-cell *matCellDef="let element">
                  <textarea
                    matInput
                    placeholder="Observación"
                    style="width: 200px"
                    [(ngModel)]="element.obsDelegado"
                  ></textarea>
                </td>
              </ng-container>

              <!-- estVotacion -->
              <ng-container matColumnDef="estVotacion">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Transmitido</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <mat-select
                        placeholder="Filtrar por"
                        (selectionChange)="
                          applySelectFilter('estVotacion', $event.value)
                        "
                      >
                        <mat-option value="">Todos</mat-option>
                        <mat-option value="SI">SI</mat-option>
                        <mat-option value="NO">NO</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.estVotacion }}
                </td>
              </ng-container>
              <!-- obsVotacion -->
              <ng-container matColumnDef="obsVotacion">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter"> <span>Observación Votación</span></div>

                </th>
                <td mat-cell *matCellDef="let element">
                  <textarea
                    matInput
                    placeholder="Observación"
                    style="width: 200px"
                    [(ngModel)]="element.obsVotacion"
                  ></textarea>
                </td>
              </ng-container>

              <!-- instaldoJrv -->
              <ng-container matColumnDef="instaldoJrv">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Instalado JRV</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <mat-select
                        placeholder="Filtrar por"
                        (selectionChange)="
                          applySelectFilter('instaldoJrv', $event.value)
                        "
                      >
                        <mat-option value="">Todos</mat-option>
                        <mat-option value="SI">SI</mat-option>
                        <mat-option value="NO">NO</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </th>

                <td mat-cell *matCellDef="let element">
                  <mat-select
                    [(ngModel)]="element.instaloJrv"
                    style="width: 160px"
                  >
                    <mat-option value="SI">SI</mat-option>
                    <mat-option value="NO">NO</mat-option>
                  </mat-select>
                </td>
              </ng-container>

              <!-- estaManana -->
              <ng-container matColumnDef="estaManana">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Esta Mañana</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <mat-select
                        placeholder="Filtrar por"
                        (selectionChange)="
                          applySelectFilter('estaManana', $event.value)
                        "
                      >
                        <mat-option value="">Todos</mat-option>
                        <mat-option value="SI">SI</mat-option>
                        <mat-option value="NO">NO</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </th>

                <td mat-cell *matCellDef="let element">
                  <mat-select
                    [(ngModel)]="element.estaManana"
                    style="width: 160px"
                  >
                    <mat-option value="SI">SI</mat-option>
                    <mat-option value="NO">NO</mat-option>
                  </mat-select>
                </td>
              </ng-container>

              <!-- estarTarde -->
              <ng-container matColumnDef="estarTarde">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter">
                    <span>Esta Tarde</span>
                    <mat-form-field appearance="outline" class="filter-field">
                      <mat-select
                        placeholder="Filtrar por"
                        (selectionChange)="
                          applySelectFilter('estarTarde', $event.value)
                        "
                      >
                        <mat-option value="">Todos</mat-option>
                        <mat-option value="SI">SI</mat-option>
                        <mat-option value="NO">NO</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </th>

                <td mat-cell *matCellDef="let element">
                  <mat-select
                    [(ngModel)]="element.estaTarde"
                    style="width: 160px"
                  >
                    <mat-option value="SI">SI</mat-option>
                    <mat-option value="NO">NO</mat-option>
                  </mat-select>
                </td>
              </ng-container>
              <!-- Acciones -->
              <ng-container matColumnDef="opciones">
                <th mat-header-cell *matHeaderCellDef sticky>
                  <div class="header-filter"> <span>Acciones</span></div>
                </th>
                <td mat-cell *matCellDef="let element">
                  <button style="width: 130px;"
                    mat-stroked-button
                    color="primary"
                    (click)="guardarJunta(element)"
                  >
                    <mat-icon>save</mat-icon> Guardar
                  </button>

                  <button style="width: 130px;"
                    mat-stroked-button
                    color="accent"
                    (click)="asignarDelegados(element)"
                  >
                    <mat-icon>group</mat-icon> Delegados
                  </button>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="columasJuntas" sticky></tr>
              <tr
                mat-row
                *matRowDef="let row; columns: columasJuntas"
                (click)="seleccionarFila(row)"
                [class.fila-seleccionada]="isRowSelected(row)"
              ></tr>
            </table>
            <mat-paginator
              [pageSizeOptions]="[25, 50, 75, 100]"
            ></mat-paginator>
          </div>
        </div>
      </div>
    </mat-card-content>
    <mat-card> <ngx-spinner type="ball-scale-multiple"></ngx-spinner> </mat-card
  ></mat-card>
</div>
